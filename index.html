<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pluto-Charon Tidal Locking Simulation</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #0a0a0a;
            color: #ffffff;
            font-family: Arial, sans-serif;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            color: #4a9eff;
            margin-bottom: 10px;
        }
        
        .subtitle {
            text-align: center;
            color: #cccccc;
            margin-bottom: 30px;
            font-size: 18px;
        }
        
        #simulationContainer {
            width: 100%;
            height: 600px;
            border: 2px solid #333;
            border-radius: 10px;
            position: relative;
            background: radial-gradient(circle at center, #1a1a2e 0%, #0a0a0a 100%);
            overflow: hidden;
        }
        
        .controls {
            margin: 20px 0;
            text-align: center;
        }
        
        .controls button {
            background: #4a9eff;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        
        .controls button:hover {
            background: #357abd;
        }
        
        .controls button:disabled {
            background: #666;
            cursor: not-allowed;
        }
        
        .speed-control {
            margin: 10px;
        }
        
        .speed-control input {
            width: 200px;
        }
        
        .info-panel {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
            background: #1a1a1a;
            padding: 20px;
            border-radius: 10px;
        }
        
        .info-box {
            background: #2a2a2a;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #4a9eff;
        }
        
        .info-box h3 {
            margin: 0 0 10px 0;
            color: #4a9eff;
        }
        
        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
        }
        
        .stats {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            font-size: 14px;
            min-width: 200px;
        }
        
        @media (max-width: 768px) {
            .info-panel {
                grid-template-columns: 1fr;
            }
            
            .legend {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Pluto-Charon Tidal Locking Simulation</h1>
        <p class="subtitle">Demonstrating mutual tidal locking between Pluto and its moon Charon</p>
        
        <div id="simulationContainer">
            <canvas id="simulationCanvas"></canvas>
            <div class="stats">
                <div>Time: <span id="timeDisplay">0.0</span> Pluto days</div>
                <div>Charon Orbital Position: <span id="charonOrbit">0°</span></div>
                <div>Charon Rotation: <span id="charonRotation">0°</span></div>
                <div>Pluto Rotation: <span id="plutoRotation">0°</span></div>
            </div>
        </div>
        
        <div class="controls">
            <button id="playPauseBtn">Play</button>
            <button id="resetBtn">Reset</button>
            <div class="speed-control">
                <label>Speed: </label>
                <input type="range" id="speedSlider" min="0.1" max="5" value="1" step="0.1">
                <span id="speedDisplay">1.0x</span>
            </div>
        </div>
        
        <div class="legend">
            <div class="legend-item">
                <div class="legend-color" style="background: #8B4513;"></div>
                <span>Pluto</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #A0A0A0;"></div>
                <span>Charon</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #ff6b6b;"></div>
                <span>Surface Feature (Pluto)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #4ecdc4;"></div>
                <span>Surface Feature (Charon)</span>
            </div>
        </div>
        
        <div class="info-panel">
            <div class="info-box">
                <h3>Tidal Locking Condition 1</h3>
                <p><strong>Charon's rotation period = Charon's orbital period</strong></p>
                <p>Charon is tidally locked to Pluto, meaning it always shows the same face to Pluto. Watch how the cyan dot on Charon always faces toward Pluto as it orbits.</p>
            </div>
            <div class="info-box">
                <h3>Tidal Locking Condition 2</h3>
                <p><strong>Charon's orbital period = Pluto's rotation period</strong></p>
                <p>Pluto and Charon are mutually tidally locked. Pluto always shows the same face to Charon. Watch how the red dot on Pluto always faces toward Charon.</p>
            </div>
        </div>
        
        <div class="info-panel">
            <div class="info-box">
                <h3>Real Data</h3>
                <p>• Orbital period: 6.387 Earth days<br>
                • Distance: ~19,570 km apart<br>
                • Charon is unusually large relative to Pluto (ratio ~1:8)<br>
                • They orbit around a common barycenter</p>
            </div>
            <div class="info-box">
                <h3>What This Means</h3>
                <p>From Pluto's surface, Charon would appear to hang motionless in the sky, always in the same position. From Charon's surface, Pluto would similarly appear stationary. This is unique in our solar system!</p>
            </div>
        </div>
    </div>

    <script>
        class PlutoCharonSimulation {
            constructor() {
                this.canvas = document.getElementById('simulationCanvas');
                this.ctx = this.canvas.getContext('2d');
                this.isPlaying = false;
                this.speed = 1.0;
                this.time = 0;
                this.animationId = null;
                
                // System parameters (scaled for visualization)
                this.centerX = 0;
                this.centerY = 0;
                this.orbitalRadius = 180;
                this.plutoRadius = 35;
                this.charonRadius = 18;
                
                // Barycenter distance from Pluto center (Pluto-Charon barycenter)
                this.barycentricDistance = 12;
                
                this.setupCanvas();
                this.setupEventListeners();
                this.draw();
            }
            
            setupCanvas() {
                const container = document.getElementById('simulationContainer');
                this.canvas.width = container.clientWidth;
                this.canvas.height = container.clientHeight;
                this.centerX = this.canvas.width / 2;
                this.centerY = this.canvas.height / 2;
            }
            
            setupEventListeners() {
                const playPauseBtn = document.getElementById('playPauseBtn');
                const resetBtn = document.getElementById('resetBtn');
                const speedSlider = document.getElementById('speedSlider');
                
                playPauseBtn.addEventListener('click', () => this.togglePlayPause());
                resetBtn.addEventListener('click', () => this.reset());
                speedSlider.addEventListener('input', (e) => this.setSpeed(e.target.value));
                
                window.addEventListener('resize', () => {
                    this.setupCanvas();
                    this.draw();
                });
            }
            
            togglePlayPause() {
                this.isPlaying = !this.isPlaying;
                const btn = document.getElementById('playPauseBtn');
                btn.textContent = this.isPlaying ? 'Pause' : 'Play';
                
                if (this.isPlaying) {
                    this.animate();
                } else {
                    cancelAnimationFrame(this.animationId);
                }
            }
            
            reset() {
                this.time = 0;
                this.isPlaying = false;
                document.getElementById('playPauseBtn').textContent = 'Play';
                cancelAnimationFrame(this.animationId);
                this.draw();
            }
            
            setSpeed(speed) {
                this.speed = parseFloat(speed);
                document.getElementById('speedDisplay').textContent = speed + 'x';
            }
            
            animate() {
                if (!this.isPlaying) return;
                
                this.time += 0.01 * this.speed;
                this.draw();
                this.updateStats();
                
                this.animationId = requestAnimationFrame(() => this.animate());
            }
            
            draw() {
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                
                // Draw orbital path
                this.ctx.strokeStyle = '#333';
                this.ctx.lineWidth = 1;
                this.ctx.beginPath();
                this.ctx.arc(this.centerX, this.centerY, this.orbitalRadius, 0, Math.PI * 2);
                this.ctx.stroke();
                
                // Calculate positions
                // Both Pluto and Charon orbit around their barycenter
                const orbitalAngle = this.time * 2 * Math.PI;
                
                // Barycenter position (stationary for simplicity)
                const barycenterX = this.centerX;
                const barycenterY = this.centerY;
                
                // Pluto position (orbits around barycenter)
                const plutoX = barycenterX - this.barycentricDistance * Math.cos(orbitalAngle);
                const plutoY = barycenterY - this.barycentricDistance * Math.sin(orbitalAngle);
                
                // Charon position (orbits around barycenter)
                const charonX = barycenterX + (this.orbitalRadius - this.barycentricDistance) * Math.cos(orbitalAngle);
                const charonY = barycenterY + (this.orbitalRadius - this.barycentricDistance) * Math.sin(orbitalAngle);
                
                // Draw barycenter
                this.ctx.fillStyle = '#ffff00';
                this.ctx.beginPath();
                this.ctx.arc(barycenterX, barycenterY, 3, 0, Math.PI * 2);
                this.ctx.fill();
                
                // Draw connection line
                this.ctx.strokeStyle = '#555';
                this.ctx.lineWidth = 1;
                this.ctx.beginPath();
                this.ctx.moveTo(plutoX, plutoY);
                this.ctx.lineTo(charonX, charonY);
                this.ctx.stroke();
                
                // Draw Pluto
                this.ctx.fillStyle = '#8B4513';
                this.ctx.beginPath();
                this.ctx.arc(plutoX, plutoY, this.plutoRadius, 0, Math.PI * 2);
                this.ctx.fill();
                
                // Draw Pluto's surface feature (shows Pluto's rotation)
                // Since Pluto is mutually tidally locked, it rotates once per orbital period
                const plutoRotationAngle = orbitalAngle; // Same as orbital angle
                const plutoFeatureX = plutoX + (this.plutoRadius - 8) * Math.cos(plutoRotationAngle);
                const plutoFeatureY = plutoY + (this.plutoRadius - 8) * Math.sin(plutoRotationAngle);
                
                this.ctx.fillStyle = '#ff6b6b';
                this.ctx.beginPath();
                this.ctx.arc(plutoFeatureX, plutoFeatureY, 6, 0, Math.PI * 2);
                this.ctx.fill();
                
                // Draw Charon
                this.ctx.fillStyle = '#A0A0A0';
                this.ctx.beginPath();
                this.ctx.arc(charonX, charonY, this.charonRadius, 0, Math.PI * 2);
                this.ctx.fill();
                
                // Draw Charon's surface feature (shows Charon's rotation)
                // Charon is tidally locked, so it rotates once per orbital period
                // The feature should always face toward Pluto
                const charonToPlutoAngle = Math.atan2(plutoY - charonY, plutoX - charonX);
                const charonFeatureX = charonX + (this.charonRadius - 5) * Math.cos(charonToPlutoAngle);
                const charonFeatureY = charonY + (this.charonRadius - 5) * Math.sin(charonToPlutoAngle);
                
                this.ctx.fillStyle = '#4ecdc4';
                this.ctx.beginPath();
                this.ctx.arc(charonFeatureX, charonFeatureY, 4, 0, Math.PI * 2);
                this.ctx.fill();
                
                // Draw labels
                this.ctx.fillStyle = '#ffffff';
                this.ctx.font = '14px Arial';
                this.ctx.textAlign = 'center';
                this.ctx.fillText('Pluto', plutoX, plutoY + this.plutoRadius + 20);
                this.ctx.fillText('Charon', charonX, charonY + this.charonRadius + 20);
                this.ctx.fillText('Barycenter', barycenterX, barycenterY - 15);
            }
            
            updateStats() {
                const orbitalDegrees = (this.time * 360) % 360;
                const timeInDays = this.time * 6.387; // Convert to Earth days
                
                document.getElementById('timeDisplay').textContent = timeInDays.toFixed(1);
                document.getElementById('charonOrbit').textContent = orbitalDegrees.toFixed(1) + '°';
                document.getElementById('charonRotation').textContent = orbitalDegrees.toFixed(1) + '°';
                document.getElementById('plutoRotation').textContent = orbitalDegrees.toFixed(1) + '°';
            }
        }
        
        // Initialize simulation when page loads
        window.addEventListener('load', () => {
            new PlutoCharonSimulation();
        });
    </script>
</body>
</html>